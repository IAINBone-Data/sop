<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOP IAIN Bone</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }
    #main-app { flex-grow: 1; }
    .dataset-card { cursor: pointer; }
    .modal-overlay { transition: opacity 0.3s ease; }
    .admin-popup {
        position: absolute;
        right: 0;
        top: 100%;
        margin-top: 0.5rem;
        z-index: 50;
        transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        transform-origin: top right;
    }
    .admin-popup.hidden {
        opacity: 0;
        transform: scale(0.95);
        pointer-events: none;
    }
    .modal-scrollable .modal-content {
        max-height: 90vh;
        overflow-y: auto;
    }
    /* Gaya untuk filter Sifat Data */
    input[type="radio"][name="filter-sifat"]:checked + .sifat-filter-label {
        background-color: #3b82f6; /* bg-blue-600 */
        color: white;
        border-color: #3b82f6; /* border-blue-600 */
    }
    .sifat-filter-label {
        transition: background-color 0.2s, color 0.2s;
    }
    .sifat-filter-label:hover {
        background-color: #eff6ff; /* bg-blue-100 */
    }

    html, body {
        scroll-behavior: smooth;
    }
  </style>
</head>
<body class="bg-slate-50">

  <!-- Custom Alert Modal -->
  <div id="custom-alert-modal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="w-full max-w-sm p-6 space-y-4 bg-white rounded-xl shadow-lg text-center transform transition-all">
        <div id="custom-alert-icon-container" class="mx-auto flex items-center justify-center h-12 w-12 rounded-full">
            <!-- Icon will be injected here -->
        </div>
        <p id="custom-alert-message" class="text-lg font-medium text-gray-700"></p>
        <button id="close-custom-alert" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">Tutup</button>
    </div>
</div>

  <!-- Modal Kirim Pesan -->
  <div id="message-modal" class="modal-overlay fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg transform transition-all">
      <form id="message-form">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Kirim Pesan ke Admin</h2>
            <button type="button" id="close-message-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
        </div>
        <div class="space-y-4">
          <div>
            <label for="message-nama" class="text-sm font-medium text-gray-700">Nama Anda</label>
            <input type="text" id="message-nama" name="Nama" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="message-kontak" class="text-sm font-medium text-gray-700">Email / No. HP</label>
            <input type="text" id="message-kontak" name="Kontak" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="message-pesan" class="text-sm font-medium text-gray-700">Pesan Anda</label>
            <textarea id="message-pesan" name="Pesan" rows="4" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          </div>
        </div>
        <div id="message-form-error" class="mt-4 text-sm text-center text-red-500 font-medium hidden"></div>
        <div class="flex items-center gap-4 pt-6 mt-6 border-t">
          <button type="button" id="cancel-message-form" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
          <button type="submit" id="submit-message-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
            <span id="send-message-button-text">Kirim Pesan</span>
            <span id="send-message-spinner" class="hidden"><i class="fa fa-spinner fa-spin"></i></span>
          </button>
        </div>
      </form>
    </div>
  </div>


  <!-- Modal Login -->
  <div id="login-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg transform transition-all" id="login-modal-content">
      <div class="text-center">
        <h1 class="text-2xl font-bold text-gray-800">Login Administrator</h1>
        <p class="text-gray-500">Silakan login untuk melanjutkan</p>
      </div>
      <form id="login-form" class="space-y-6">
        <div>
          <label for="username" class="text-sm font-medium text-gray-700">Username</label>
          <input type="text" id="username" name="username" required class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label for="password" class="text-sm font-medium text-gray-700">Password</label>
          <input type="password" id="password" name="password" required class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div id="login-error" class="text-sm text-center text-red-500 font-medium hidden"></div>
        <div class="flex items-center gap-4">
          <button type="button" id="close-login-modal" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
          <button type="submit" id="login-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
            <span id="login-button-text">Login</span>
            <span id="login-spinner" class="hidden"><i class="fa fa-spinner fa-spin"></i></span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Tambah Dataset -->
  <div id="add-dataset-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden modal-scrollable">
      <div class="modal-content w-full max-w-2xl bg-white rounded-xl shadow-lg transform transition-all">
        <form id="add-dataset-form" class="p-8">
            <div class="flex justify-between items-center pb-4 border-b">
              <h1 class="text-2xl font-bold text-gray-800">Tambah Dataset Baru</h1>
              <button type="button" id="close-add-dataset-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-6">
              <div class="md:col-span-2">
                <label for="add-judul" class="text-sm font-medium text-gray-700">Judul <span class="text-red-500">*</span></label>
                <input type="text" id="add-judul" name="Judul" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div class="md:col-span-2">
                <label for="add-uraian" class="text-sm font-medium text-gray-700">Uraian <span class="text-red-500">*</span></label>
                <textarea id="add-uraian" name="Uraian" rows="3" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
              </div>
              <div>
                <label for="add-kategori" class="text-sm font-medium text-gray-700">Kategori <span class="text-red-500">*</span></label>
                <select id="add-kategori" name="Kategori-select" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></select>
                <input type="text" id="add-kategori-new" name="Kategori" placeholder="Masukkan kategori baru" class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 hidden">
              </div>
              <div>
                <label for="add-sifat" class="text-sm font-medium text-gray-700">Sifat Data <span class="text-red-500">*</span></label>
                <select id="add-sifat" name="Sifat" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="Terbuka">Terbuka</option>
                  <option value="Terbatas">Terbatas</option>
                  <option value="Tertutup">Tertutup</option>
                </select>
              </div>
              <div>
                <label for="add-produsen-data" class="text-sm font-medium text-gray-700">Produsen Data <span class="text-red-500">*</span></label>
                <select id="add-produsen-data" name="Produsen Data" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="" disabled selected>Pilih salah satu...</option>
                </select>
              </div>
              <div>
                <label for="add-penanggung-jawab" class="text-sm font-medium text-gray-700">Penanggung Jawab <span class="text-red-500">*</span></label>
                <input type="text" id="add-penanggung-jawab" name="Penanggung Jawab" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label for="add-tag" class="text-sm font-medium text-gray-700">Tag <span class="text-red-500">*</span></label>
                <input type="text" id="add-tag" name="Tag" placeholder="Pisahkan dengan koma" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
               <div class="md:col-span-2">
                <label for="add-nama-file" class="text-sm font-medium text-gray-700">Nama File <span class="text-red-500">*</span></label>
                <input type="text" id="add-nama-file" name="Nama File" placeholder="Contoh: data-mahasiswa-2024" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div class="md:col-span-2">
                <label for="add-file" class="text-sm font-medium text-gray-700">Unggah File <span class="text-red-500">*</span></label>
                <input type="file" id="add-file" required class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/>
              </div>
              <div class="md:col-span-2">
                <label class="text-sm font-medium text-gray-700">Format <span class="text-red-500">*</span></label>
                <div class="flex items-center flex-wrap gap-x-4 gap-y-2 mt-2">
                    <div class="flex items-center">
                        <input id="format-csv" name="Format" type="radio" value="csv" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-csv" class="ml-2 block text-sm text-gray-900">CSV</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-xls" name="Format" type="radio" value="xls" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-xls" class="ml-2 block text-sm text-gray-900">XLS</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-xlsx" name="Format" type="radio" value="xlsx" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                        <label for="format-xlsx" class="ml-2 block text-sm text-gray-900">XLSX</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-pdf" name="Format" type="radio" value="pdf" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-pdf" class="ml-2 block text-sm text-gray-900">PDF</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-pptx" name="Format" type="radio" value="pptx" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-pptx" class="ml-2 block text-sm text-gray-900">PPTX</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-docx" name="Format" type="radio" value="docx" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-docx" class="ml-2 block text-sm text-gray-900">DOCX</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-png" name="Format" type="radio" value="png" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-png" class="ml-2 block text-sm text-gray-900">PNG</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-jpg" name="Format" type="radio" value="jpg" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-jpg" class="ml-2 block text-sm text-gray-900">JPG</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-mp4" name="Format" type="radio" value="mp4" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-mp4" class="ml-2 block text-sm text-gray-900">MP4</label>
                    </div>
                    <div class="flex items-center">
                        <input id="format-mp3" name="Format" type="radio" value="mp3" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="format-mp3" class="ml-2 block text-sm text-gray-900">MP3</label>
                    </div>
                </div>
              </div>
              <div>
                <label for="add-frekuensi" class="text-sm font-medium text-gray-700">Frekuensi Pembaruan <span class="text-red-500">*</span></label>
                <select id="add-frekuensi" name="Frekuensi" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="" disabled selected>Pilih frekuensi...</option>
                  <option value="Bulanan">Bulanan</option>
                  <option value="Triwulan">Triwulan</option>
                  <option value="Semester">Semester</option>
                  <option value="Tahunan">Tahunan</option>
                  <option value="Tahun Akademik">Tahun Akademik</option>
                </select>
              </div>
              <div class="md:col-span-2">
                  <label class="text-sm font-medium text-gray-700">Tahun Data <span class="text-red-500">*</span></label>
                  <div class="flex items-center gap-2 mt-1">
                      <input type="number" name="Tahun Data Start" placeholder="Contoh: 2020" required class="w-full px-4 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      <span class="text-gray-500">-</span>
                      <input type="number" name="Tahun Data End" placeholder="Contoh: 2025" required class="w-full px-4 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  </div>
              </div>
            </div>
            <div id="add-dataset-error" class="mt-4 text-sm text-center text-red-500 font-medium hidden"></div>
            <div id="add-dataset-success" class="mt-4 text-sm text-center text-green-500 font-medium hidden"></div>
            <div class="flex items-center gap-4 pt-6 border-t mt-6">
              <button type="button" id="cancel-add-dataset-button" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
              <button type="submit" id="submit-add-dataset-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
                <span id="add-dataset-button-text">Simpan Dataset</span>
                <span id="add-dataset-spinner" class="hidden"><i class="fa fa-spinner fa-spin"></i></span>
              </button>
            </div>
        </form>
      </div>
  </div>

  <!-- Modal Edit Dataset -->
  <div id="edit-dataset-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden modal-scrollable">
      <div class="modal-content w-full max-w-2xl bg-white rounded-xl shadow-lg transform transition-all">
        <form id="edit-dataset-form" class="p-8">
            <input type="hidden" id="edit-rowIndex" name="rowIndex">
            <div class="flex justify-between items-center pb-4 border-b">
              <h1 class="text-2xl font-bold text-gray-800">Edit Dataset</h1>
              <button type="button" id="close-edit-dataset-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-6">
              <div class="md:col-span-2">
                <label for="edit-judul" class="text-sm font-medium text-gray-700">Judul <span class="text-red-500">*</span></label>
                <input type="text" id="edit-judul" name="Judul" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div class="md:col-span-2">
                <label for="edit-uraian" class="text-sm font-medium text-gray-700">Uraian <span class="text-red-500">*</span></label>
                <textarea id="edit-uraian" name="Uraian" rows="3" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
              </div>
              <div>
                <label for="edit-kategori" class="text-sm font-medium text-gray-700">Kategori <span class="text-red-500">*</span></label>
                <select id="edit-kategori" name="Kategori" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></select>
              </div>
               <div>
                <label for="edit-sifat" class="text-sm font-medium text-gray-700">Sifat Data <span class="text-red-500">*</span></label>
                <select id="edit-sifat" name="Sifat" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="Terbuka">Terbuka</option>
                  <option value="Terbatas">Terbatas</option>
                  <option value="Tertutup">Tertutup</option>
                </select>
              </div>
              <div>
                <label for="edit-produsen-data" class="text-sm font-medium text-gray-700">Produsen Data <span class="text-red-500">*</span></label>
                <select id="edit-produsen-data" name="Produsen Data" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                   <!-- Options populated by JS -->
                </select>
              </div>
              <div>
                <label for="edit-penanggung-jawab" class="text-sm font-medium text-gray-700">Penanggung Jawab <span class="text-red-500">*</span></label>
                <input type="text" id="edit-penanggung-jawab" name="Penanggung Jawab" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label for="edit-tag" class="text-sm font-medium text-gray-700">Tag <span class="text-red-500">*</span></label>
                <input type="text" id="edit-tag" name="Tag" placeholder="Pisahkan dengan koma" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div class="md:col-span-2">
                <label for="edit-nama-file" class="text-sm font-medium text-gray-700">Nama File <span class="text-red-500">*</span></label>
                <input type="text" id="edit-nama-file" name="Nama File" placeholder="Contoh: data-mahasiswa-2024" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>
              <div class="md:col-span-2">
                <label for="edit-file" class="text-sm font-medium text-gray-700">Unggah File Baru (Opsional)</label>
                  <p id="current-file-info" class="text-xs text-gray-500 mt-1"></p>
                <input type="file" id="edit-file" class="w-full mt-2 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-yellow-50 file:text-yellow-700 hover:file:bg-yellow-100"/>
              </div>
              <div class="md:col-span-2">
                <label class="text-sm font-medium text-gray-700">Format <span class="text-red-500">*</span></label>
                <div id="edit-format-container" class="flex items-center flex-wrap gap-x-4 gap-y-2 mt-2">
                    <div class="flex items-center">
                        <input id="edit-format-csv" name="Format" type="radio" value="csv" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-csv" class="ml-2 block text-sm text-gray-900">CSV</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-xls" name="Format" type="radio" value="xls" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-xls" class="ml-2 block text-sm text-gray-900">XLS</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-xlsx" name="Format" type="radio" value="xlsx" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-xlsx" class="ml-2 block text-sm text-gray-900">XLSX</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-pdf" name="Format" type="radio" value="pdf" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-pdf" class="ml-2 block text-sm text-gray-900">PDF</label>
                    </div>
                     <div class="flex items-center">
                        <input id="edit-format-pptx" name="Format" type="radio" value="pptx" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-pptx" class="ml-2 block text-sm text-gray-900">PPTX</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-docx" name="Format" type="radio" value="docx" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-docx" class="ml-2 block text-sm text-gray-900">DOCX</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-png" name="Format" type="radio" value="png" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-png" class="ml-2 block text-sm text-gray-900">PNG</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-jpg" name="Format" type="radio" value="jpg" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-jpg" class="ml-2 block text-sm text-gray-900">JPG</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-mp4" name="Format" type="radio" value="mp4" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-mp4" class="ml-2 block text-sm text-gray-900">MP4</label>
                    </div>
                    <div class="flex items-center">
                        <input id="edit-format-mp3" name="Format" type="radio" value="mp3" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="edit-format-mp3" class="ml-2 block text-sm text-gray-900">MP3</label>
                    </div>
                </div>
              </div>
              <div>
                <label for="edit-frekuensi" class="text-sm font-medium text-gray-700">Frekuensi Pembaruan <span class="text-red-500">*</span></label>
                <select id="edit-frekuensi" name="Frekuensi" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="" disabled>Pilih frekuensi...</option>
                  <option value="Bulanan">Bulanan</option>
                  <option value="Triwulan">Triwulan</option>
                  <option value="Semester">Semester</option>
                  <option value="Tahunan">Tahunan</option>
                  <option value="Tahun Akademik">Tahun Akademik</option>
                </select>
              </div>
              <div class="md:col-span-2">
                  <label class="text-sm font-medium text-gray-700">Tahun Data <span class="text-red-500">*</span></label>
                  <div class="flex items-center gap-2 mt-1">
                      <input type="number" id="edit-tahun-data-start" name="Tahun Data Start" placeholder="Contoh: 2020" required class="w-full px-4 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      <span class="text-gray-500">-</span>
                      <input type="number" id="edit-tahun-data-end" name="Tahun Data End" placeholder="Contoh: 2025" required class="w-full px-4 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                  </div>
              </div>
            </div>
            <div id="edit-dataset-error" class="mt-4 text-sm text-center text-red-500 font-medium hidden"></div>
            <div id="edit-dataset-success" class="mt-4 text-sm text-center text-green-500 font-medium hidden"></div>
            <div class="flex items-center gap-4 pt-6 border-t mt-6">
              <button type="button" id="cancel-edit-dataset-button" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
              <button type="submit" id="submit-edit-dataset-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
                <span id="edit-dataset-button-text">Simpan Perubahan</span>
                <span id="edit-dataset-spinner" class="hidden"><i class="fa fa-spinner fa-spin"></i></span>
              </button>
            </div>
        </form>
      </div>
  </div>

  <div id="reset-password-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg transform transition-all" id="reset-password-modal-content">
      <div class="text-center">
        <h1 class="text-2xl font-bold text-gray-800">Reset Password</h1>
        <p class="text-gray-500">Masukkan password baru Anda.</p>
      </div>
      <form id="reset-password-form" class="space-y-4">
        <div>
          <label for="new_password" class="text-sm font-medium text-gray-700">Password Baru</label>
          <input type="password" id="new_password" name="new_password" required class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label for="confirm_password" class="text-sm font-medium text-gray-700">Konfirmasi Password Baru</label>
          <input type="password" id="confirm_password" name="confirm_password" required class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div id="reset-password-error" class="text-sm text-center text-red-500 font-medium hidden"></div>
        <div id="reset-password-success" class="text-sm text-center text-green-500 font-medium hidden"></div>
        <div class="flex items-center gap-4 pt-2">
          <button type="button" id="close-reset-password-modal" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
          <button type="submit" id="reset-submit-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
            <span id="reset-button-text">Reset Password</span>
            <span id="reset-spinner" class="hidden"><i class="fa fa-spinner fa-spin"></i></span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <div id="main-app">
    <header class="bg-white shadow-md sticky top-0 z-40">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center">
            <button id="hamburger-menu-button" class="p-2 rounded-md text-gray-600 hover:bg-gray-100">
              <i class="fas fa-bars"></i>
            </button>
            <a href="#" id="header-title-link" class="text-xl font-bold text-gray-800 ml-4">SOP IAIN Bone</a>
          </div>
          <div id="user-info" class="flex items-center gap-4">
          </div>
        </div>
      </div>
    </header>

    <div id="popup-menu" class="fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-50 transform -translate-x-full transition-transform duration-300">
        <div class="p-4">
            <h2 class="text-xl font-bold border-b pb-2">Menu</h2>
            <ul id="main-menu-list" class="mt-4 space-y-2">
                <li><a href="#" id="home-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-home w-6 mr-2"></i>Beranda</a></li>
                <li><a href="#" id="about-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-info-circle w-6 mr-2"></i>Tentang</a></li>
                <li id="stats-menu-item" class="hidden"><a href="#" id="stats-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-chart-bar w-6 mr-2"></i>Statistik</a></li>
                <li id="admin-list-menu-item" class="hidden"><a href="#" id="admin-list-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-users-cog w-6 mr-2"></i>Daftar Admin</a></li>
                <li id="request-menu-item" class="hidden"><a href="#" id="request-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-inbox w-6 mr-2"></i>Permintaan Data</a></li>
                <li id="message-menu-item" class="hidden"><a href="#" id="message-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-envelope w-6 mr-2"></i>Pesan</a></li>
                <li id="panduan-menu-item" class="hidden"><a href="https://drive.google.com/drive/folders/1LzHczamY7z75UFF2GlYTNLHxNUHi4SLt?usp=sharing" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-book-open w-6 mr-2"></i>Panduan</a></li>
                <li class="border-t pt-2 mt-2"><a href="https://www.iain-bone.ac.id" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-globe w-6 mr-2"></i>Web IAIN Bone</a></li>
                <li><a href="https://s.id/iainbone" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-concierge-bell w-6 mr-2"></i>Informasi Layanan</a></li>
                <li><a href="https://ppid.iain-bone.ac.id" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-bullhorn w-6 mr-2"></i>PPID</a></li>
            </ul>
        </div>
    </div>
    <div id="menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
      
      <div id="list-view-container">
        
        <div class="flex flex-col lg:flex-row gap-8">
          <aside class="w-full lg:w-1/4 xl:w-1/5">
            <div class="p-5 bg-white rounded-lg shadow-md sticky top-20">
                <div class="mb-5 space-y-3">
                    <h2 class="text-lg font-bold text-gray-800 border-b pb-3">Informasi Ringkas</h2>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-600">Total SOP</span>
                        <span id="stat-total-dataset" class="font-bold text-gray-800 bg-blue-100 px-2 py-0.5 rounded-full">0</span>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-600">Total Unit</span>
                        <span id="stat-total-producer" class="font-bold text-gray-800 bg-green-100 px-2 py-0.5 rounded-full">0</span>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-600">Total Kategori</span>
                        <span id="stat-total-category" class="font-bold text-gray-800 bg-yellow-100 px-2 py-0.5 rounded-full">0</span>
                    </div>
                </div>

                <div class="flex justify-between items-center border-b pb-3 mb-5 mt-5">
                    <h2 class="text-lg font-bold text-gray-800">Filter Data</h2>
                    <button id="toggle-filter-btn" class="p-1 rounded-md lg:hidden hover:bg-gray-100">
                        <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                    </button>
                </div>
                
                <div id="filter-content" class="hidden lg:block space-y-5">
                    <div>
                        <label for="filter-category" class="block text-sm font-medium text-gray-700 mb-1">Kategori</label>
                        <select id="filter-category" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"><option value="">Semua Kategori</option></select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Sifat Data</label>
                        <div id="filter-sifat-container" class="flex flex-wrap gap-2">
                            <input type="radio" id="sifat-semua" name="filter-sifat" value="" class="sr-only" checked>
                            <label for="sifat-semua" class="sifat-filter-label cursor-pointer px-3 py-1 border rounded-full text-sm font-medium">All</label>

                            <input type="radio" id="sifat-terbuka" name="filter-sifat" value="Terbuka" class="sr-only">
                            <label for="sifat-terbuka" class="sifat-filter-label cursor-pointer px-3 py-1 border rounded-full text-sm font-medium">Terbuka</label>

                            <input type="radio" id="sifat-terbatas" name="filter-sifat" value="Terbatas" class="sr-only">
                            <label for="sifat-terbatas" class="sifat-filter-label cursor-pointer px-3 py-1 border rounded-full text-sm font-medium">Terbatas</label>
                        </div>
                    </div>
                    <div>
                        <label for="filter-producer" class="block text-sm font-medium text-gray-700 mb-1">Produsen Data</label>
                        <select id="filter-producer" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"><option value="">Semua Produsen</option></select>
                    </div>
                    <div>
                        <label for="filter-tag" class="block text-sm font-medium text-gray-700 mb-1">Tag</label>
                        <select id="filter-tag" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"><option value="">Semua Tag</option></select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Filter Tahun Data</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="filter-data-start-year" placeholder="Dari" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <span class="text-gray-500">-</span>
                            <input type="number" id="filter-data-end-year" placeholder="Sampai" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <button id="reset-filter-button" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Reset Filter</button>
                    
                    <div class="mt-5 pt-5 border-t">
                        <h2 class="text-lg font-bold text-gray-800 mb-3">Dataset Populer</h2>
                        <ol id="popular-datasets-list" class="space-y-2 text-sm">
                            <!-- Popular datasets will be injected here -->
                        </ol>
                        <p id="no-popular-datasets" class="text-sm text-gray-500 hidden">Belum ada data kunjungan.</p>
                    </div>

                </div>
            </div>
          </aside>
          <section class="w-full lg:w-3/4 xl:w-4/5">
            <div class="flex flex-wrap items-center justify-between mb-4 gap-4">
                <h3 id="dataset-count" class="text-lg font-semibold text-gray-700 w-full sm:w-auto"><i class="fa fa-spinner fa-spin"></i> Memuat data...</h3>
                <div class="flex items-center gap-4 flex-wrap justify-end flex-grow">
                    <div class="flex items-center gap-2">
                        <div id="add-dataset-button-container" class="hidden">
                            <button id="add-dataset-trigger-button" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 text-sm flex items-center whitespace-nowrap">
                                <i class="fas fa-plus mr-2"></i>Tambah
                            </button>
                        </div>
                        <button id="reload-dataset-button" class="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 text-sm flex items-center whitespace-nowrap" title="Muat Ulang Data">
                            <i id="reload-icon" class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div>
                        <select id="sort-dataset-select" class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="default">Urut</option>
                            <option value="no-desc">No Terbaru</option>
                            <option value="no-asc">No Terlama</option>
                            <option value="tanggal-desc">Tgl Terbaru</option>
                            <option value="tanggal-asc">Tgl Terlama</option>
                        </select>
                    </div>
                    <div>
                        <select id="filter-year" class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Tahun</option>
                        </select>
                    </div>
                    <div class="relative flex-grow sm:flex-grow-0">
                        <input type="text" id="search-input" placeholder="Cari dataset..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><i class="fa fa-search text-gray-400"></i></div>
                    </div>
                </div>
            </div>
            <div id="loading-indicator" class="text-center py-10"><i class="fa fa-spinner fa-spin fa-3x text-blue-500"></i><p class="mt-2 text-gray-600">Sedang memuat dataset...</p></div>
            <div id="dataset-list" class="space-y-4"></div>
            <!-- Pagination Container -->
            <div id="pagination-container" class="flex justify-center items-center mt-8 space-x-2"></div>
            <div id="no-data-message" class="hidden text-center py-10 bg-white rounded-lg shadow-md"><i class="fa-solid fa-database fa-3x text-gray-400"></i><p class="mt-4 text-lg font-semibold text-gray-700">Data Tidak Ditemukan</p><p class="mt-1 text-gray-500">Coba ubah kata kunci pencarian atau filter Anda.</p></div>
          </section>
        </div>

      </div>
      
      <div id="detail-view-container" class="hidden">
        <div class="flex items-center justify-between mb-4">
            <button id="back-to-list-button" class="text-blue-600 hover:text-blue-800 font-semibold flex items-center"><i class="fas fa-arrow-left mr-2"></i>Beranda</button>
            <div id="detail-action-buttons" class="flex items-center gap-2"></div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-8">
                <section>
                    <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md space-y-6">
                        <div class="flex justify-between items-start pb-4">
                            <h2 id="detail-title" class="text-2xl font-bold text-gray-800"></h2>
                            <span id="detail-sifat" class="text-sm font-bold px-3 py-1 rounded-full flex-shrink-0 ml-4"></span>
                        </div>
                        <p id="detail-uraian" class="text-gray-700"></p>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Data dan Sumber Daya</h3>
                            <div id="resource-container" class="border rounded-lg p-4">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex-grow">
                                        <div class="flex items-start">
                                            <i class="fas fa-file-alt text-gray-500 text-xl mr-3 mt-1"></i>
                                            <div>
                                                <p id="detail-file-title" class="font-semibold text-gray-800"></p>
                                                <div class="flex items-center gap-2 mt-1 text-sm text-gray-600">
                                                    <span id="detail-filename-display"></span>
                                                    <span id="detail-file-format" class="font-semibold px-2 py-0.5 rounded-full text-xs"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <a id="detail-download-link" href="#" target="_blank" class="text-blue-600 hover:text-blue-800 font-semibold">Unduh</a>
                                </div>
                                <div id="request-button-container" class="mt-4"></div>
                            </div>
                            <div id="table-preview-container" class="mt-6 hidden">
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">Preview Data</h3>
                                <div id="table-preview-content" class="border rounded-lg overflow-x-auto">
                                    <!-- Konten pratinjau (iframe atau tabel) akan dimasukkan di sini oleh JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="history-section">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Riwayat Perubahan :</h3>
                        <div id="history-list" class="space-y-4">
                            <!-- History items will be injected here -->
                        </div>
                        <p id="no-history-message" class="text-gray-500 hidden">Tidak ada riwayat perubahan untuk dataset ini.</p>
                    </div>
                </section>
            </div>
            <div class="lg:col-span-1 space-y-8">
                <section>
                    <div class="bg-white p-6 rounded-lg shadow-md sticky top-20">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-3">Metadata</h3>
                        <table class="w-full text-sm text-left text-gray-600">
                            <tbody>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Produsen Data</td><td id="meta-produsen" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Penanggung Jawab</td><td id="meta-penanggung-jawab" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Tanggal Dibuat</td><td id="meta-tanggal" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Tanggal Diperbaharui</td><td id="meta-diperbaharui" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Frekuensi</td><td id="meta-frekuensi" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Tahun Data</td><td id="meta-tahun-data" class="py-3 px-2"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
      </div>

      <div id="about-view-container" class="hidden p-8 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Tentang Satu Data IAIN Bone</h2>
        <p class="text-gray-700 leading-relaxed">
            Sistem Satu Data IAIN Bone adalah sebuah platform terpusat yang dirancang untuk mengelola, mengintegrasikan, dan menyajikan data dari berbagai unit kerja di lingkungan Institut Agama Islam Negeri (IAIN) Bone. Tujuan utama dari sistem ini adalah untuk mewujudkan tata kelola data yang akurat, mutakhir, terpadu, dan dapat diakses dengan mudah oleh seluruh pemangku kepentingan.
        </p>
        <p class="text-gray-700 mt-4 leading-relaxed">
            Dengan adanya platform ini, diharapkan pengambilan keputusan di semua tingkatan dapat didasarkan pada data yang valid dan reliabel, sehingga meningkatkan efisiensi, transparansi, dan akuntabilitas institusi.
        </p>
        <h3 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Tim Pengembang</h3>
        <p class="text-gray-700">Dikelola oleh Tim Kerja Satu Data IAIN Bone dan didukung penuh oleh UPT TIPD IAIN Bone dan Tim PPID IAIN Bone.</p>
      </div>
      
      <div id="stats-view-container" class="hidden p-8 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Statistik Penggunaan</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="bg-blue-100 p-6 rounded-lg flex items-center">
                <i class="fas fa-users fa-3x text-blue-500"></i>
                <div class="ml-4">
                    <div id="stats-total-visitors" class="text-3xl font-bold text-blue-800">0</div>
                    <div class="text-blue-700">Total Pengunjung</div>
                </div>
            </div>
            <div class="bg-green-100 p-6 rounded-lg flex items-center">
                <i class="fas fa-download fa-3x text-green-500"></i>
                <div class="ml-4">
                    <div id="stats-total-downloads" class="text-3xl font-bold text-green-800">0</div>
                    <div class="text-green-700">Total Unduhan</div>
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div>
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Pengunjung per Bulan (12 Bulan Terakhir)</h3>
                <div class="h-64"><canvas id="monthly-visits-chart"></canvas></div>
            </div>
            <div>
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Pengunjung per Tahun</h3>
                <div class="h-64"><canvas id="yearly-visits-chart"></canvas></div>
            </div>
        </div>
        <div id="admin-login-stats-container" class="mt-8">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">Rekapitulasi Login Admin</h3>
            <div class="overflow-x-auto bg-white rounded-lg shadow">
                <table class="min-w-full">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="py-3 px-6 text-left font-semibold text-gray-600">Username</th>
                            <th class="py-3 px-6 text-left font-semibold text-gray-600">Jumlah Login Berhasil</th>
                        </tr>
                    </thead>
                    <tbody id="admin-logins-table-body">
                        <!-- Data rekapitulasi akan dimasukkan di sini -->
                    </tbody>
                </table>
            </div>
        </div>
      </div>
      
      <div id="admin-list-view-container" class="hidden p-4 md:p-8 bg-white rounded-lg shadow-md">
          <div class="flex justify-between items-center mb-6">
              <h2 class="text-2xl font-bold text-gray-800">Daftar Admin</h2>
              <button id="add-user-button" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 flex items-center">
                  <i class="fas fa-plus mr-2"></i>Tambah Admin
              </button>
          </div>
          <!-- Mobile/Card View -->
          <div id="admin-list-cards" class="md:hidden grid grid-cols-1 sm:grid-cols-2 gap-4">
              <!-- Admin cards will be injected here -->
          </div>
          <!-- Desktop/Table View -->
          <div class="overflow-x-auto hidden md:block">
              <table class="min-w-full bg-white">
                  <thead class="bg-gray-50 text-xs uppercase text-gray-700">
                      <tr>
                          <th class="py-3 px-4 text-left">Pengguna</th>
                          <th class="py-3 px-4 text-left">Username</th>
                          <th class="py-3 px-4 text-left">Unit</th>
                          <th class="py-3 px-4 text-left">Role</th>
                          <th class="py-3 px-4 text-left">Aksi</th>
                      </tr>
                  </thead>
                  <tbody id="admin-list-table-body" class="divide-y">
                      <!-- Admin rows will be injected here -->
                  </tbody>
              </table>
          </div>
      </div>

      <!-- Request View Container -->
      <div id="request-view-container" class="hidden p-4 md:p-8 bg-white rounded-lg shadow-md">
          <h2 class="text-2xl font-bold text-gray-800 mb-6">Daftar Permintaan Data</h2>
          <!-- Mobile/Card View -->
          <div id="request-list-cards" class="md:hidden space-y-4">
            <!-- Request cards will be injected here -->
          </div>
          <!-- Desktop/Table View -->
          <div class="overflow-x-auto hidden md:block">
              <table class="min-w-full bg-white">
                  <thead class="bg-gray-100">
                      <tr>
                          <th class="py-2 px-4 text-left">Timestamp</th>
                          <th class="py-2 px-4 text-left">Dataset</th>
                          <th class="py-2 px-4 text-left">Pemohon</th>
                          <th class="py-2 px-4 text-left">Keperluan</th>
                          <th class="py-2 px-4 text-left">Tgl Respon</th>
                          <th class="py-2 px-4 text-left">Status</th>
                          <th class="py-2 px-4 text-left">Aksi</th>
                      </tr>
                  </thead>
                  <tbody id="request-list-table-body">
                      <!-- Request rows will be injected here -->
                  </tbody>
              </table>
          </div>
      </div>
      
      <!-- Messages View Container -->
      <div id="message-view-container" class="hidden bg-white rounded-lg shadow-md">
          <div class="p-6 border-b">
              <h2 class="text-2xl font-bold text-gray-800">Kotak Masuk</h2>
          </div>
          <div id="message-list-container" class="divide-y divide-gray-200">
              <!-- Messages will be injected here -->
          </div>
      </div>


      <!-- Modal Minta Data -->
      <div id="request-data-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
          <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg">
              <form id="request-data-form">
                  <input type="hidden" id="request-dataset-title">
                  <input type="hidden" id="request-dataset-file">
                  <input type="hidden" id="request-dataset-user">
                  <h2 class="text-2xl font-bold text-gray-800 mb-6">Form Permintaan Data</h2>
                  <p class="text-sm text-gray-600 mb-4">Anda akan meminta akses untuk dataset: <strong id="request-modal-dataset-title" class="text-gray-800"></strong></p>
                  <div class="space-y-4">
                      <div>
                          <label for="request-nama" class="text-sm font-medium text-gray-700">Nama Lengkap</label>
                          <input type="text" id="request-nama" name="namaPemohon" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="request-email" class="text-sm font-medium text-gray-700">Email Aktif</label>
                          <input type="email" id="request-email" name="emailPemohon" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="request-keperluan" class="text-sm font-medium text-gray-700">Keperluan</label>
                          <textarea id="request-keperluan" name="keperluan" rows="3" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                      </div>
                  </div>
                  <div id="request-form-error" class="mt-4 text-sm text-center text-red-500 font-medium hidden"></div>
                  <div class="flex items-center gap-4 pt-6 mt-6 border-t">
                      <button type="button" id="cancel-request-form" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
                      <button type="submit" id="submit-request-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">Kirim Permintaan</button>
                  </div>
                  <p class="text-xs text-gray-500 text-center mt-4">Permohonan data anda akan diproses bekerjasama dengan Tim PPID IAIN Bone</p>
              </form>
          </div>
      </div>
      
      <!-- Modal Tambah/Edit User -->
      <div id="user-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
          <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg">
              <form id="user-form">
                  <input type="hidden" id="user-rowIndex" name="rowIndex">
                  <h2 id="user-modal-title" class="text-2xl font-bold text-gray-800 mb-6"></h2>
                  <div class="space-y-4">
                      <div>
                          <label for="user-nama" class="text-sm font-medium text-gray-700">Nama</label>
                          <input type="text" id="user-nama" name="Nama" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="user-username" class="text-sm font-medium text-gray-700">Username</label>
                          <input type="text" id="user-username" name="Username" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="user-password" class="text-sm font-medium text-gray-700">Password</label>
                          <input type="password" id="user-password" name="Password" class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Kosongkan jika tidak ingin mengubah">
                      </div>
                      <div>
                          <label for="user-unit" class="text-sm font-medium text-gray-700">Unit</label>
                          <input type="text" id="user-unit" name="Unit" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="user-jabatan" class="text-sm font-medium text-gray-700">Jabatan</label>
                          <input type="text" id="user-jabatan" name="Jabatan" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="user-role" class="text-sm font-medium text-gray-700">Role</label>
                          <select id="user-role" name="Role" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                              <option value="Admin">Admin</option>
                              <option value="Terbatas">Terbatas</option>
                              <option value="Tertutup">Tertutup</option>
                              <option value="Super Admin">Super Admin</option>
                          </select>
                      </div>
                  </div>
                  <div id="user-form-error" class="mt-4 text-sm text-center text-red-500 font-medium hidden"></div>
                  <div class="flex items-center gap-4 pt-6 mt-6 border-t">
                      <button type="button" id="cancel-user-form" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
                      <button type="submit" id="save-user-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">Simpan</button>
                  </div>
              </form>
          </div>
      </div>
      
      <!-- Modal Profil Pengguna -->
      <div id="profile-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
          <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg">
              <form id="profile-form">
                  <h2 class="text-2xl font-bold text-gray-800 mb-6">Profil Pengguna</h2>
                  <div class="space-y-4">
                      <div>
                          <label for="profile-nama" class="text-sm font-medium text-gray-700">Nama</label>
                          <input type="text" id="profile-nama" name="Nama" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label for="profile-jabatan" class="text-sm font-medium text-gray-700">Jabatan</label>
                          <input type="text" id="profile-jabatan" name="Jabatan" required class="w-full px-4 py-2 mt-1 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                      </div>
                      <div>
                          <label class="text-sm font-medium text-gray-700">Username</label>
                          <input type="text" id="profile-username" name="Username" disabled class="w-full px-4 py-2 mt-1 text-gray-500 bg-gray-200 border border-gray-300 rounded-lg">
                      </div>
                      <div>
                          <label class="text-sm font-medium text-gray-700">Role</label>
                          <input type="text" id="profile-role" name="Role" disabled class="w-full px-4 py-2 mt-1 text-gray-500 bg-gray-200 border border-gray-300 rounded-lg">
                      </div>
                  </div>
                  <div id="profile-form-error" class="mt-4 text-sm text-center text-red-500 font-medium hidden"></div>
                  <div id="profile-form-success" class="mt-4 text-sm text-center text-green-500 font-medium hidden"></div>
                  <div class="flex items-center gap-4 pt-6 mt-6 border-t">
                      <button type="button" id="cancel-profile-form" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Tutup</button>
                      <button type="submit" id="save-profile-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">Simpan Perubahan</button>
                  </div>
                  <div class="mt-4">
                    <a href="#" id="profile-open-reset-password" class="text-sm text-blue-600 hover:underline">Reset Password</a>
                  </div>
              </form>
          </div>
      </div>

    </main>
  </div>

  <footer class="bg-white text-slate-600 text-sm text-center py-6 border-t">
    <p>&copy; 2025 - Dikelola oleh Tim Kerja Satu Data IAIN Bone. Didukung oleh UPT TIPD IAIN Bone dan Tim PPID IAIN Bone.</p>
  </footer>
 
  <!-- Tombol Chat Sticky -->
  <button id="chat-button" class="fixed bottom-6 right-6 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center hover:bg-blue-700 transition-transform transform hover:scale-110 z-50">
    <i class="fas fa-comments text-2xl"></i>
  </button>
  
  <!-- Menghubungkan ke file JavaScript eksternal -->
  <script src="app.js"></script>
</body>
</html>

