<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOP IAIN Bone</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }
    #main-app { flex-grow: 1; }
    .dataset-card { cursor: pointer; }
    .modal-overlay { transition: opacity 0.3s ease; }
    html, body {
        scroll-behavior: smooth;
    }
  </style>
</head>
<body class="bg-slate-50">

  <!-- Custom Alert Modal -->
  <div id="custom-alert-modal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="w-full max-w-sm p-6 space-y-4 bg-white rounded-xl shadow-lg text-center transform transition-all">
        <div id="custom-alert-icon-container" class="mx-auto flex items-center justify-center h-12 w-12 rounded-full">
            <!-- Icon will be injected here -->
        </div>
        <p id="custom-alert-message" class="text-lg font-medium text-gray-700"></p>
        <button id="close-custom-alert" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">Tutup</button>
    </div>
</div>

  <!-- Modal Login -->
  <div id="login-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg transform transition-all" id="login-modal-content">
      <div class="text-center">
        <h1 class="text-2xl font-bold text-gray-800">Login Administrator</h1>
        <p class="text-gray-500">Silakan login untuk melanjutkan</p>
      </div>
      <form id="login-form" class="space-y-6">
        <div>
          <label for="username" class="text-sm font-medium text-gray-700">Username</label>
          <input type="text" id="username" name="username" required class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label for="password" class="text-sm font-medium text-gray-700">Password</label>
          <input type="password" id="password" name="password" required class="w-full px-4 py-2 mt-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div id="login-error" class="text-sm text-center text-red-500 font-medium hidden"></div>
        <div class="flex items-center gap-4">
          <button type="button" id="close-login-modal" class="w-full px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Batal</button>
          <button type="submit" id="login-button" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
            <span id="login-button-text">Login</span>
            <span id="login-spinner" class="hidden"><i class="fa fa-spinner fa-spin"></i></span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <div id="main-app">
    <header class="bg-white shadow-md sticky top-0 z-40">
      <div class="w-full px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center">
            <button id="hamburger-menu-button" class="p-2 rounded-md text-gray-600 hover:bg-gray-100">
              <i class="fas fa-bars"></i>
            </button>
            <a href="#" id="header-title-link" class="text-xl font-bold text-gray-800 ml-4">SOP IAIN Bone</a>
          </div>
          <div id="user-info-container" class="flex items-center gap-4">
          </div>
        </div>
      </div>
    </header>

    <div id="popup-menu" class="fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-50 transform -translate-x-full transition-transform duration-300">
        <div class="p-4">
            <h2 class="text-xl font-bold border-b pb-2">Menu</h2>
            <ul id="main-menu-list" class="mt-4 space-y-2">
                <li><a href="#" id="home-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-home w-6 mr-2"></i>Beranda</a></li>
                <li><a href="#" id="about-link" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-info-circle w-6 mr-2"></i>Tentang</a></li>
                <li class="border-t pt-2 mt-2"><a href="https://www.iain-bone.ac.id" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-globe w-6 mr-2"></i>Web IAIN Bone</a></li>
                <li><a href="https://s.id/iainbone" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-concierge-bell w-6 mr-2"></i>Informasi Layanan</a></li>
                <li><a href="https://ppid.iain-bone.ac.id" target="_blank" class="flex items-center py-2 px-4 hover:bg-gray-100 rounded"><i class="fas fa-bullhorn w-6 mr-2"></i>PPID</a></li>
            </ul>
        </div>
    </div>
    <div id="menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

    <main class="w-full p-4 sm:p-6 lg:p-8">
      
      <div id="list-view-container">
        
        <section class="w-full">
            <div class="flex flex-wrap items-center justify-between mb-4 gap-4">
                <h3 id="dataset-count" class="text-lg font-semibold text-gray-700 w-full sm:w-auto"><i class="fa fa-spinner fa-spin"></i> Memuat data...</h3>
                <div class="flex items-center gap-4 flex-wrap justify-end flex-grow">
                    <button id="reload-dataset-button" class="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 text-sm flex items-center whitespace-nowrap" title="Muat Ulang Data">
                        <i id="reload-icon" class="fas fa-sync-alt"></i>
                    </button>
                    <div>
                        <select id="sort-dataset-select" class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="tanggal-desc">Tgl Terbaru</option>
                            <option value="tanggal-asc">Tgl Terlama</option>
                        </select>
                    </div>
                    <div class="relative flex-grow sm:flex-grow-0">
                        <input type="text" id="search-input" placeholder="Cari SOP..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><i class="fa fa-search text-gray-400"></i></div>
                    </div>
                </div>
            </div>
            <div id="loading-indicator" class="text-center py-10"><i class="fa fa-spinner fa-spin fa-3x text-blue-500"></i><p class="mt-2 text-gray-600">Sedang memuat SOP...</p></div>
            <div id="dataset-list" class="space-y-4"></div>
            <!-- Pagination Container -->
            <div id="pagination-container" class="flex justify-center items-center mt-8 space-x-2"></div>
            <div id="no-data-message" class="hidden text-center py-10 bg-white rounded-lg shadow-md"><i class="fa-solid fa-database fa-3x text-gray-400"></i><p class="mt-4 text-lg font-semibold text-gray-700">Data Tidak Ditemukan</p><p class="mt-1 text-gray-500">Coba ubah kata kunci pencarian Anda.</p></div>
        </section>
      </div>
      
      <div id="detail-view-container" class="hidden">
        <div class="flex items-center justify-between mb-4">
            <button id="back-to-list-button" class="text-blue-600 hover:text-blue-800 font-semibold flex items-center"><i class="fas fa-arrow-left mr-2"></i>Kembali ke Daftar</button>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-8">
                <section>
                    <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md space-y-6">
                        <div class="flex justify-between items-start pb-4">
                            <h2 id="detail-title" class="text-2xl font-bold text-gray-800"></h2>
                        </div>
                        <p id="detail-uraian" class="text-gray-700"></p>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Data dan Sumber Daya</h3>
                            <div id="resource-container" class="border rounded-lg p-4">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex-grow">
                                        <div class="flex items-start">
                                            <i class="fas fa-file-alt text-gray-500 text-xl mr-3 mt-1"></i>
                                            <div>
                                                <p id="detail-file-title" class="font-semibold text-gray-800"></p>
                                                <div class="flex items-center gap-2 mt-1 text-sm text-gray-600">
                                                    <span id="detail-filename-display"></span>
                                                    <span id="detail-file-format" class="font-semibold px-2 py-0.5 rounded-full text-xs"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <a id="detail-download-link" href="#" target="_blank" class="text-blue-600 hover:text-blue-800 font-semibold">Unduh</a>
                                </div>
                            </div>
                            <div id="table-preview-container" class="mt-6 hidden">
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">Preview Data</h3>
                                <div id="table-preview-content" class="border rounded-lg overflow-x-auto">
                                    <!-- Konten pratinjau (iframe atau tabel) akan dimasukkan di sini oleh JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="lg:col-span-1 space-y-8">
                <section>
                    <div class="bg-white p-6 rounded-lg shadow-md sticky top-20">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-3">Metadata</h3>
                        <table class="w-full text-sm text-left text-gray-600">
                            <tbody>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Produsen Data</td><td id="meta-produsen" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Penanggung Jawab</td><td id="meta-penanggung-jawab" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Tanggal Dibuat</td><td id="meta-tanggal" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Tanggal Diperbaharui</td><td id="meta-diperbaharui" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Frekuensi</td><td id="meta-frekuensi" class="py-3 px-2"></td></tr>
                                <tr class="border-b"><td class="py-3 px-2 font-semibold">Tahun Data</td><td id="meta-tahun-data" class="py-3 px-2"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
      </div>

      <div id="about-view-container" class="hidden p-8 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Tentang Satu Data IAIN Bone</h2>
        <p class="text-gray-700 leading-relaxed">
            Sistem Satu Data IAIN Bone adalah sebuah platform terpusat yang dirancang untuk mengelola, mengintegrasikan, dan menyajikan data dari berbagai unit kerja di lingkungan Institut Agama Islam Negeri (IAIN) Bone. Tujuan utama dari sistem ini adalah untuk mewujudkan tata kelola data yang akurat, mutakhir, terpadu, dan dapat diakses dengan mudah oleh seluruh pemangku kepentingan.
        </p>
        <p class="text-gray-700 mt-4 leading-relaxed">
            Dengan adanya platform ini, diharapkan pengambilan keputusan di semua tingkatan dapat didasarkan pada data yang valid dan reliabel, sehingga meningkatkan efisiensi, transparansi, dan akuntabilitas institusi.
        </p>
        <h3 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Tim Pengembang</h3>
        <p class="text-gray-700">Dikelola oleh Tim Kerja Satu Data IAIN Bone dan didukung penuh oleh UPT TIPD IAIN Bone dan Tim PPID IAIN Bone.</p>
      </div>
      
    </main>
  </div>

  <footer class="bg-white text-slate-600 text-sm text-center py-6 border-t">
    <p>&copy; 2025 - Dikelola oleh Tim Kerja Satu Data IAIN Bone. Didukung oleh UPT TIPD IAIN Bone dan Tim PPID IAIN Bone.</p>
  </footer>
  
  <script src="app.js"></script>
</body>
</html>

